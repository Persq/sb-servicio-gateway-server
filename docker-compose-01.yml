version: '3.7'
services:
  config-server:
    container_name: config-server
    image: config-server:v1
    ports:
      - "8888:8888"
    restart: always
    networks:
      - springcloud
  servicio-eureka-server:
    container_name: servicio-eureka-server
    image: servicio-eureka-server:v1
    ports:
      - "8761:8761"
    restart: always
    networks:
      - springcloud
  bd-mysql8:
    container_name: bd-mysql8
    image: mysql:8
    ports:
      - "3306:3306"
    restart: always
    networks:
      - springcloud
    environment: 
      MYSQL_DATABASE: db_springboot_cloud
      MYSQL_ROOT_PASSWORD: sasa
  bd-postgres12:
    container_name: bd-postgres12
    image: postgres:12-alpine
    ports:
      - "5432:5432"
    restart: always
    networks:
      - springcloud
    environment:
      POSTGRES_DB: db_springboot_cloud
      # POSTGRES_USER: root
      POSTGRES_PASSWORD: sasa
  pgadmin:
    image: dpage/pgadmin4
    environment:
      PGADMIN_DEFAULT_EMAIL: "lc@admin.com"
      PGADMIN_DEFAULT_PASSWORD: "admin"
    ports:
      - "2020:80"
    networks:
      - springcloud  
    depends_on:
      - bd-postgres12
  mb-rabbitmq310:
    container_name: mb-rabbitmq310
    image: rabbitmq:3.10-management
    ports:
      - "15672:15672"
      - "5672:5672"
    restart: always
    networks:
      - springcloud
networks:
  springcloud:
    name: springcloud
    driver: bridge